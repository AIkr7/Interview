(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,n){e.exports=n(391)},227:function(e,t,n){},391:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(23),i=n.n(o),c=(n(227),n(20)),s=n(16),u=n(48),l=n(18),f=n.n(l),d=n(21),m=n(25),p=n(52),h=n(53),v=n(58),b=n(54),g=n(59);function y(e){return new Promise(function(t){var n=[],a=new window.MediaRecorder(e);a.start(),setTimeout(function(){a.stop(),console.log(a.state)},15e3),a.onstop=function(e){var a=new Blob(n,{type:"video/mp4"});console.log(a),t(a)},a.ondataavailable=function(e){n.push(e.data)}})}var w={cameraContainer:{width:"100%"},videoContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},video:{border:"2px solid black"},videoOptions:{display:"flex",justifyContent:"center",alignItems:"center",flex:12},canvas:{width:"100%"}},x=null,E=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(v.a)(this,Object(b.a)(t).call(this,e))).useMedia=function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(n.handleInputs)},n.handleInputs=function(e){(function(e,t){return new Promise(function(t){var n=[],a=new window.MediaRecorder(e),r=function(){a.start(),setTimeout(function(){a.stop(),console.log(a.state)},2e4)};r(),a.onstop=function(e){var t=new Blob(n,{type:"audio/mp3; codecs=opus"});console.log(t),r()},a.ondataavailable=function(e){n.push(e.data)}})})(e).then(function(e){}),n.handleVideoInput(e)},n.handleVideoInput=function(){var e=Object(m.a)(f.a.mark(function e(t){var a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.videoRef.current.srcObject=t,!(a=n.props.recorder)){e.next=10;break}return a(function(e){return Object(d.a)({},e,{currentSecond:0})}),x=setInterval(function(){a(function(e){return Object(d.a)({},e,{currentSecond:e.currentSecond+1})})},1e3),e.next=8,y(t);case 8:r=e.sent,a(function(e){return Object(d.a)({},e,{blob:r})});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleAudioInput=function(e){var t=new AudioContext,a=t.createMediaStreamSource(e),r=t.createScriptProcessor(1024,1,1);a.connect(r),r.connect(t.destination),r.onaudioprocess=function(e){n.audioChunks.push(e.inputBuffer)}},n.saveVideoToCanvas=function(){var e=n.videoRef.current,t=n.canvas.current.getContext("2d");e.addEventListener("play",function(){var e=this;!function n(){e.paused||e.ended||(t.drawImage(e,0,0),setTimeout(n,1e3/30))}()},0)},n.videoRef=r.a.createRef(),n.audioRef=r.a.createRef(),n.recorderRef=r.a.createRef(),n.audioChunks=[],n.canvas=r.a.createRef(),n.currentImage=null,n.snapshotInterval=null,n.videoRecord=null,n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.useMedia(),this.collectData(),this.saveVideoToCanvas()}},{key:"componentWillUnmount",value:function(){clearInterval(this.snapshotInterval),clearInterval(x)}},{key:"collectData",value:function(){var e=this;this.snapshotInterval=setInterval(function(){e.currentImage=function(e){var t=new Image;return t.src=e.toDataURL("image/jpeg",.3),t.src}(e.canvas.current),e.props.takeSnapshot(e.currentImage),e.audioChunks=[]},1e3)}},{key:"render",value:function(){return r.a.createElement("div",{style:w.cameraContainer},r.a.createElement("div",{style:w.videoContainer},r.a.createElement("video",{muted:!0,style:w.video,ref:this.videoRef,width:"45%",autoPlay:!0}),r.a.createElement("canvas",{hidden:!0,ref:this.canvas,width:"640",height:"480"})),r.a.createElement("div",null))}}]),t}(a.Component);var j=n(80),O=n(24),k=n.n(O),I=n(35),C=n.n(I),S=Object(j.a)(function(e){return{root:{textAlign:"center",width:"100%",margin:"auto",height:100,marginTop:20,marginBottom:20,paddingTop:20,background:"linear-gradient(65deg, #00A2B8 -25%, #00F9D2 100%);",boxShadow:"0 3px 5px 2px rgba(33, 203, 243, .3)"}}});function R(e){var t=S();return r.a.createElement(k.a,{className:t.root},r.a.createElement(C.a,{component:"h2",variant:"display1",gutterBottom:!0,className:Object(j.a)({root:{height:12}}).root,style:{color:"#fff"}},e.text),r.a.createElement("br",null),e.children)}var P=n(43),T=n.n(P),N=function(e,t){return t[e]},B=function(e){return Object(s.withStyles)(function(t){return{root:{background:N(e,{red:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",blue:"linear-gradient(65deg, #00A2B8 -25%, #00F9D2 100%);"}),border:0,borderRadius:3,boxShadow:N(e,{red:"0 3px 5px 2px rgba(255, 105, 135, .3)",blue:"0 3px 5px 2px rgba(33, 203, 243, .3)"}),color:"#fff",height:62,margin:20,padding:"0 40px"},label:{fontSize:24,color:"#fff"}}})(T.a)},F=B("blue"),D=(B("red"),n(83)),W=n.n(D),M="http://3729af3e.ngrok.io/api/";function A(e){return L.apply(this,arguments)}function L(){return(L=Object(m.a)(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("".concat(M,"snapshot"),{data:t});case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Q(){return(Q=Object(m.a)(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("".concat(M,"initialSnapshot"),{data:t});case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var U=n(36),q={width:"25%",fontSize:16};var V=function(e){var t=r.a.useState(""),n=Object(c.a)(t,2),a=n[0],o=n[1],i=r.a.useState(!1),s=Object(c.a)(i,2),u=s[0],l=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{text:"Prepare for correct posture!"}),r.a.createElement(E,{initial:!0,takeSnapshot:o}),r.a.createElement(F,{onClick:function(){!function(e){Q.apply(this,arguments)}(a),l(!0),setTimeout(function(){return e.navigate("QuestionsPart")},1e3)},style:q},"I'm ready!"),r.a.createElement(U.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:u,onClose:function(){l(!1)},ContentProps:{"aria-describedby":"init-snapshot"},message:r.a.createElement("span",{id:"init-snapshot"},"Image saved successfully!")}))},z=n(51),J=n(123),X=n(61),$=n(44),G=n.n($),H=["Tell me about yourself.","What are your strengths?","What are your weaknesses?","Why do you want this job?","Where would you like to be in your career five years from now?","What's your ideal company?","What attracted you to this company?","Why should we hire you?"],K=10;function Y(e){var t=r.a.useState(0),n=Object(c.a)(t,2),a=n[0],o=n[1],i=10;function s(){var t=100/K/i;o(function(n){return n<100?n+t:(e.navigate("Loading"),-15)})}return r.a.useEffect(function(){var e=setInterval(s,1e3/i);return function(){clearInterval(e)}},[]),r.a.createElement(R,{text:H[e.params.questionIndex]},r.a.createElement(G.a,{variant:"buffer",color:"secondary",value:a,valueBuffer:a}))}var Z=null,_=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={notification:""},n.setNotification=function(e){n.props.setParams(function(t){console.log(t);var n=Object(X.a)(t.issues).reverse(),a=Object(J.a)(n),r=a[0],o=a.slice(1),i=Object(d.a)({},r,Object(z.a)({},t.currentSecond,e));return Object(d.a)({},t,{issues:[i].concat(Object(X.a)(o)).reverse()})}),console.log(n.props.params.issues),n.setState({notification:e})},n.openNotification=function(e){n.setNotification(e),Z=setTimeout(function(){n.setNotification&&n.setNotification("")},2500)},n.handleNotification=function(e){var t=e.smile,a=e.slouch,r=(e.emotion,e.focus);return t?a?n.openNotification("Stop Slouching!"):r?void 0:n.openNotification("Be focused!"):n.openNotification("Do not stop smiling!")},n.handleSnapshot=function(){var e=Object(m.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t);case 3:return a=e.sent,e.abrupt("return",n.handleNotification(a.data));case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.setParams(function(e){return Object(d.a)({},e,{issues:[].concat(Object(X.a)(e.issues),[{}])})})}},{key:"componentWillUnmount",value:function(){clearTimeout(Z)}},{key:"render",value:function(){var e=this.props,t=e.navigate,n=e.params,a=e.setParams,o=this.state.notification;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{navigate:t,params:n,setParams:a}),r.a.createElement(E,{takeSnapshot:this.handleSnapshot,recorder:a}),r.a.createElement(U.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!o,ContentProps:{"aria-describedby":"init-snapshot"},message:r.a.createElement("span",{id:"init-snapshot"},o)}))}}]),t}(r.a.Component),ee=n(125),te=n(45),ne=n.n(te),ae=n(47),re=n.n(ae),oe=n(26),ie=n.n(oe),ce=n(46),se=n.n(ce),ue=n(37),le=n.n(ue);var fe=Object(s.withStyles)(function(e){return{root:{width:"95%",marginLeft:"5%",marginTop:0,overflowX:"auto"},table:{minWidth:400}}})(function(e){var t=e.classes,n=e.rows;return console.log(n),r.a.createElement(k.a,{className:t.root},r.a.createElement(ne.a,{className:t.table},r.a.createElement(se.a,null,r.a.createElement(le.a,null,r.a.createElement(ie.a,null,"Time"),r.a.createElement(ie.a,{align:"right"},"Description"))),r.a.createElement(re.a,null,n.map(function(e){return r.a.createElement(le.a,{key:e.time},r.a.createElement(ie.a,{component:"th",scope:"row",style:{color:"#000"}},e.time),r.a.createElement(ie.a,{align:"right",style:{color:"#000"}},e.description))}))))});function de(e){var t=e.text,n=Object(ee.a)(e,["text"]);return r.a.createElement("div",{style:{flex:1,textAlign:"center"}},r.a.createElement(F,n,t))}var me=function(e){var t=r.a.useRef(null),n=e.navigate,a=e.params,o=e.setParams,i=a.issues[a.issues.length-1],s=Object.entries(i).map(function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return{time:"00:".concat(n),description:a}}).filter(function(e){return e.description});return a.blob&&setTimeout(function(){t.current.src=URL.createObjectURL(a.blob)},500),console.log("navigate Feedback"),r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{text:H[a.questionIndex]}),r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:{flex:6}},r.a.createElement("video",{width:"95%",height:480,ref:t,style:{marginRight:"5%"},autoPlay:!0,controls:!0})),r.a.createElement("div",{style:{flex:6}},r.a.createElement(fe,{rows:s}))),r.a.createElement("div",{style:{width:"100%",display:"flex",position:"fixed",bottom:30}},r.a.createElement(de,{text:"Calibration",onClick:function(){return n("Calibration")}}),r.a.createElement(de,{text:"Next Question",onClick:function(){o(function(e){return Object(d.a)({},e,{questionIndex:e.questionIndex+1})}),n("QuestionsPart")}}),r.a.createElement(de,{text:"Review Questions",onClick:function(){return n("QuestionsList")}})))},pe=n(124),he=n.n(pe),ve=function(e){return setTimeout(function(){e.navigate("Feedback")},4e3),r.a.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement("h4",null," Calculating data... "),r.a.createElement(he.a,{type:"Audio",color:"#00BFFF",height:"200",width:"200"}))},be=Object(s.createMuiTheme)({palette:{text:{primary:"#fff"},primary:{main:u.blue[500],text:"#fff"},secondary:{main:"#00EE00"},textPrimary:"#fff"},typography:{useNextVariants:!0}});var ge=function(){var e=r.a.useState({questionIndex:0,currentSecond:0,issues:[]}),t=Object(c.a)(e,2),n=t[0],a=t[1],o=r.a.useState("Calibration"),i=Object(c.a)(o,2),u=i[0],l=i[1];return r.a.createElement(s.MuiThemeProvider,{theme:be},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",alignItems:"center"}},function(e,t,n,a){var o={navigate:t,params:n,setParams:a};switch(e){case"Calibration":return r.a.createElement(V,o);case"QuestionsPart":return r.a.createElement(_,o);case"Loading":return r.a.createElement(ve,o);case"Feedback":return r.a.createElement(me,o)}}(u,function(e){l(e)},n,a)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[222,1,2]]]);
//# sourceMappingURL=main.354502c9.chunk.js.map